
---
layout: post
title:  "rails6 Class Table Inheritance(클래스 테이블 상속)이란?"
description: 
author: negabaro kim
tags:	rails rails/model
---

논리적으로 부모 -> 자식의 관계가 있을때

자식이 공통적으로 갖게될 컬럼들은 부모에 정의해주고
나머지 자식들이 독자적으로 가질 부분은 각 자식클래스에 선언해둠


クラステーブル継承は、オブジェクトの継承関係をクラスごとに１テーブルを用意することで表現します。
スーパークラスのテーブルにはスーパークラスの持つカラムを、サブクラスのテーブルにはサブクラスの持つカラムのみを持たせます。


# 장점

STI에서의 문제점 사라짐
테이블이 깔끔함. 각 자식클래스에 사용하지 않는 컬럼은 존재하지 않음

# 단점

자식클래스가 늘어나면 해당 테이블도 늘어남

전체 레코드 출력시 조인을 할 필요가 있음
레일즈에서 고유속성을 취득하기 위해서 따로 코드를 작성할 필요가 있음. (.select(xx.name))


Class Table Inheritanceパターンに従うと、4つのクラスそれぞれに対してテーブルを作成します。
各クラスに対応するテーブルは、そのクラス自身とサブクラスに固有の共通属性のためのカラムのみを持ちます。

Railsのモデルにはこの方法のサポートはないので、通常通り各クラスに対応したテーブルを作成することになります。


長所
STIにおけるNOT NULL制約や外部キー制約の問題が発生しない
NULLの発生を抑制できる
短所
サブクラスが増えるとテーブルも増える
論理的なレコード全体を取得するのにジョインが必要
Railsでは、サブクラス固有属性を取得するためにコードを書く必要がある

https://qiita.com/yebihara/items/9ecb838893ad99be0561