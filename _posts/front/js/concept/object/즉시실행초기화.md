즉시 객체 초기화

전역 유효범위가 난잡해지지 않도록 보호하는 또 다른 방법을 앞서 언급한 즉시 실행 함수 패턴과 비슷한 즉시 객체 초기화 패턴이 있습니다.

이 패턴은 객체가 생성된 즉시 init() 메서드를 실행해 객체를 사용하도록 합니다.

init() 함수는 모든 초기화 작업을 처리하는 기능으로 구현합니다.

즉시 객체 초기화 패턴의 예제를 살펴봅니다.

```
JAVASCRIPT
({
    // 여기에 설정 값(설정 상수)들을 정의할 수 있다.
    maxwidth : 600,
    maxheight : 400,

    // 유틸리티 메서드 또한 정의할 수 있다.
    gimmeMax : function () {
        return this.maxwidth + ' * ' + this.maxheight;
    },

    // 초기화
    init : function () {
        console.log(this.gimmeMax());
        // 더 많은 초기화 작업들을 작성할 수 있다.
        // ...
    }
}).init();
```

문법적인 면에서 이 패턴은 객체 리터럴을 사용한 일반적인 객체 생성과 똑같이 생각하면 될 것입니다.

객체 리터럴도 괄호(그룹 연산자)로 감싸는데, 이는 자바스크립트 엔진이 중괄호를 코드 블럭이 아니라 객체 리터럴로 인식하도록 지시하는 역할을 합니다.

그런 다음 닫는 괄호에 이어 init() 메서드를 즉시 호출합니다.

객체만 괄호로 감싸는 게 아니라 객체와 init() 호출 전체를 괄호 안에 넣을 수도 있습니다.

다시 말해서 다음과 같이 두 가지로 표현할 수 있습니다.

```
JAVASCRIPT
({...}).init();
({...}.init());
```

이 패턴의 장점은 즉시 실행 함수 패턴의 장점과 동일합니다. 단 한 번의 초기화 작업을 실행하는 동안 전역 네임스페이스를 보호할 수 있습니다.

코드를 익명 함수로 감싸는 것과 비교하면 이 패턴은 문법적을 신경써야 할 부분이 좀더 많은 것처럼 보일 수도 있습니다.

그러나 초기화 작업이 더 복잡하다면(실제로 자주 그렇다) 전체 초기화 절차를 구조화하는 데 도움이 될 것입니다.

예를 들어 비공개 도우미 함수들을 임시 객체의 프로퍼티로 정의하면, 즉시 실행 함수를 여기저기 흩어 놓고 쓰는 것보다 훨씬 구분하기 쉽습니다.

이 패턴의 단점은 대부분의 자바스크립트 압축 도구가 즉시 실행 함수 패턴에 비해 효과적으로 압축하지 못할 수 있다는 것입니다.

압축 도구의 관점에서는 비공개 프로퍼티와 메서드의 이름은 더 짧게 변경되지 않는 방식이 안전하기 때문입니다.

구글의 클로저 컴파일러의 고급 모드는 즉시 초기화되는 객체의 프로퍼티명을 단축시켜주고 있습니다. 다른 압축 도구를 사용할 시에는 위 패턴의 압축을 지원하는지 확인해 볼 필요가 있을 것입니다.

이 패턴은 주로 일회성 작업에 적합하다. init()이 완료되고 나면 객체에 접근할 수 없다.

init()이 완료된 이후에도 객체의 참조를 유지하고 싶다면 init()의 마지막에 return this;를 추가하면 된다.

출처: https://webclub.tistory.com/310 [Web Club]

출처: https://webclub.tistory.com/310 [Web Club]
