ã“ã‚“ã«ã¡ã¯ã€‚
BPSã®ç¦å²¡æ‹ ç‚¹ã¨ã—ã¦ä¸€ç·’ã«ãŠä»•äº‹ã•ã›ã¦ã‚‚ã‚‰ã£ã¦ã„ã¾ã™ã€ã‚¦ã‚¤ãƒ³ã‚°ãƒ‰ã‚¢ã®ã‚¦ãƒ¡ãƒãƒ¤ã‚·ã§ã™ã€‚

Flutterã¨ã„ãˆã°ã€Providerãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã‚ˆã‚‹çŠ¶æ…‹ç®¡ç†ãŒä¸»æµã«ãªã£ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚
ä»Šå›ã¯ãã®Providerãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä½œè€…ãŒæ–°ã—ãé–‹ç™ºã—ãŸã€Riverpodï¼ˆæ”¹è‰¯ç‰ˆProviderï¼‰ã¨ã„ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è§¦ã£ã¦ã¿ãŸã®ã§ã€åŸºæœ¬çš„ãªä½¿ã„æ–¹ã‚’ã¾ã¨ã‚ã¦ã¿ã¾ã—ãŸã€‚

Riverpodã¨ã¯
Providerã¨åŒã˜ä½œè€…ãŒé–‹ç™ºã—ãŸæ–°ã—ã„çŠ¶æ…‹ç®¡ç†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã™ã€‚
ç”¨é€”ã¨ã—ã¦ã¯Providerã¨ã»ã¼åŒã˜ãªã®ã§ã™ãŒã€Providerã®æ¬ ç‚¹ã‚’è£œã£ãŸæ”¹è‰¯ç‰ˆProviderã¨ãªã£ã¦ã„ã¾ã™ã€‚
ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã‚‚Providerã®ã‚¢ãƒŠã‚°ãƒ©ãƒ ã«ãªã£ã¦ã„ã¦ä½œè€…ã®éŠã³å¿ƒã‚’æ„Ÿã˜ã¾ã™ã­ğŸ¥³

å…¬å¼ã‚µã‚¤ãƒˆï¼šRiverpod: Provider, but different
ã¾ãˆãŠã
å‰æã¨ã—ã¦Riverpodã«ã¯3ã¤ã®ç¨®é¡ãŒã‚ã£ã¦ã€ãã®ä¸­ã§ã‚‚ä»Šå›ã¯Flutterã§ä½¿ç”¨ã™ã‚‹ãŸã‚ã®åŸºæœ¬çš„ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã‚ã‚‹flutter_riverpodã«ã¤ã„ã¦è§£èª¬ã—ã¦ã„ãã¾ã™ã€‚

Pub.devï¼šflutter_riverpod | Flutter Package
å…¬å¼ã‚µã‚¤ãƒˆã«ã‚‚ã‚ã‚Šã¾ã™ãŒã€3ã¤ã®é•ã„ã‚’è¡¨ã«ã—ã¾ã—ãŸã€‚

app type	package name	èª¬æ˜
Flutter +
flutter_hooks	hooks_riverpod	å°ã•ãªè¿½åŠ æ©Ÿèƒ½ã‚’æä¾›ã—ãªãŒã‚‰flutter_hooksã¨Riverpodã®ä¸¡æ–¹ã‚’ä½¿ç”¨ã™ã‚‹æ–¹æ³•ã€‚
â€»flutter_riverpodã®ãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ã‚ˆã‚Šç°¡æ½”ã«è¨˜è¿°ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
Flutter only	flutter_riverpod	Riverpodã‚’ä½¿ç”¨ã™ã‚‹åŸºæœ¬çš„ãªæ–¹æ³•ã€‚flutter_hooksã«ä¾å­˜ã—ã¾ã›ã‚“ã€‚
â€»Flutterã§Riverpodã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã®æœ€å°æ§‹æˆã¯ã“ã¡ã‚‰ã§ã™ã€‚
Dart only
(No Flutter)	riverpod	Flutterã«é–¢ã™ã‚‹å…¨ã¦ã®ã‚¯ãƒ©ã‚¹ãŒå–ã‚Šé™¤ã‹ã‚ŒãŸDartãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã™ã€‚
â€»Flutterã«ä¾å­˜ã™ã‚‹ã‹ãŸã¡ã§ã®ä½¿ç”¨ã¯ã§ãã¾ã›ã‚“ã€‚
Providerã¨ã®é•ã„
Providerã¯ç›´æ„Ÿçš„ã§ä½¿ã„ã‚„ã™ãã€ã‹ã¤é«˜æ©Ÿèƒ½ã§éå¸¸ã«å„ªã‚ŒãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã™ãŒã€ä»¥ä¸‹ã®ã‚ˆã†ãªä¸éƒ½åˆã‚‚ã‚ã‚Šã¾ã—ãŸã€‚
ã“ã®å•é¡Œã¯åƒ•ã‚‚å®Ÿéš›ã«ä½¿ç”¨ã—ã¦ã„ã¦è¦æ‰€è¦æ‰€ã§æ„Ÿã˜ã¦ã„ã¾ã—ãŸğŸ¤”

Providerã§åŒ…ã‚“ã ãƒ„ãƒªãƒ¼ä»¥å¤–ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã—ã‚ˆã†ã¨ã™ã‚‹ã¨å®Ÿè¡Œæ™‚ã«ProviderNotFoundExceptionãŒç™ºç”Ÿã™ã‚‹ã€‚
ã“ã®å•é¡Œã«é–¢ã—ã¦ã¯ç¢ºå®Ÿã«é˜²ãæ–¹æ³•ãŒãªãã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¸­ã«æ°—ã‚’ã¤ã‘ã¦ä½¿ã†ã—ã‹ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚
åŒã˜å‹ã‚’è¤‡æ•°åŒæ™‚ã«ä½¿ç”¨ã§ããªã„
Providerã¯Widgetãƒ„ãƒªãƒ¼ã‚’é¡ã£ã¦æœ€å¯„ã‚Šã®å‹ã‚’æ¢ã—ã¦ãã‚‹ã®ã§ã€è¤‡æ•°åŒã˜å‹ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã§ã—ãŸã€‚ï¼ˆä½¿ç”¨ã§ãã‚‹ã‘ã©Widgetãƒ„ãƒªãƒ¼ã®ä¸­ã§ä¸€ç•ªè¿‘ã„å‹ã«ã—ã‹ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ï¼‰

Widgetãƒ„ãƒªãƒ¼ãŒè‚¥å¤§åŒ–ã™ã‚‹
Provideã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒå¢—ãˆã¦ã„ãã¨ã€DevToolsãªã©ã§ç¢ºèªã™ã‚‹éš›ã«Widgetãƒ„ãƒªãƒ¼ãŒè‚¥å¤§åŒ–ã—ã¦å°‘ã—è¦‹ã«ãããªã£ã¦ã—ã¾ã„ã¾ã™ã€‚ï¼ˆè¦‹ã«ãã„ã ã‘ã§å®Ÿå®³ã¯ãªã—ï¼‰

ä»¥ä¸Šã®ã‚ˆã†ãªä¸éƒ½åˆãŒRiverpodã§ã¯è§£æ±ºã•ã‚Œã¦ã„ã¾ã™ğŸ¥³

Riverpodã®ãƒ¡ãƒªãƒƒãƒˆ
Providerã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«å®šæ•°ã¨ã—ã¦å®£è¨€ã™ã‚‹ã®ã§ç¢ºå®Ÿã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹
åŒã˜å‹ã®Providerã‚’åˆ©ç”¨ã§ãã‚‹
ProviderScopeã«ProviderãŒç´ã¥ãã®ã§Widgetãƒ„ãƒªãƒ¼ãŒè‚¥å¤§åŒ–ã—ãªã„
etcâ€¦
åŸºæœ¬çš„ãªä½¿ã„æ–¹
Flutterãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆæ™‚ã«è‡ªå‹•ã§ä½œã‚‰ã‚Œã‚‹ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚¢ãƒ—ãƒªã‚’ãƒªãƒ•ã‚¡ã‚¯ã‚¿ã™ã‚‹å½¢ã§ã€Providerãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§å®šç•ªã®ChangeNotifierã¨çµ„ã¿åˆã‚ã›ãŸä½¿ã„æ–¹ã‚’ä¾‹ã«è§£èª¬ã—ã¦ã„ãã¾ã™ã€‚

ãƒ¢ãƒ‡ãƒ«ã‚¯ãƒ©ã‚¹ã®ä½œæˆ
ChangeNotifierã‚’ç¶™æ‰¿ã—ãŸã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã—ã¾ã™ã€‚
ã“ã‚Œã¯Providerãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨åŒã˜ã§ã™ã­ã€‚

class Counter extends ChangeNotifier {
  var _count = 0;
  int get count => _count;

  void increment() {
    _count++;
    notifyListeners();
  }
}
Providerã®ä½œæˆ
ã‚°ãƒ­ãƒ¼ãƒãƒ«å®šæ•°ã¨ã—ã¦ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã«Providerã‚’å®£è¨€ã—ã¾ã™ã€‚
ChangeNotifierProviderã®ä»–ã«ã‚‚ã€StreamProviderã‚„StateNotifierProviderã€StateProviderãªã©ã‚‚ã‚ã‚Šã¾ã™ã€‚

final counterProvider = ChangeNotifierProvider(
  (ref) => Counter(),
);
ProviderScopeã‚’è¿½åŠ ã™ã‚‹
Widgetãƒ„ãƒªãƒ¼ã§ProviderãŒä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«ã€ãƒ«ãƒ¼ãƒˆã«ProviderScopeã‚’è¿½åŠ ã—ã¾ã™ã€‚

void main() {
  runApp(
    ProviderScope(child: MyApp()),
  );
}
Providerã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹
Consumerã‚’ä½¿ã£ã¦Providerã‚’ãƒªãƒƒã‚¹ãƒ³ã—ã¾ã™ã€‚

class MyHomePage extends StatelessWidget {
  MyHomePage({Key key, this.title}) : super(key: key);
  final String title;

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text(title),
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: <Widget>[
            Text(
              'You have pushed the button this many times:',
            ),
            Consumer(builder: (context, watch, child) {
              return Text('${watch(_counterProvider).count}');    // â†ã“ã“
            }),
          ],
        ),
      ),
    );
  }
}
ä»–ã«ã‚‚MyHomePageã®ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¯ãƒ©ã‚¹ã‚’StatelessWidgetã‹ã‚‰ConsumerWidgetã«å¤‰ãˆã‚‹ã“ã¨ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹æ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™ãŒã€Consumerã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§Widgetã®ãƒªãƒ“ãƒ«ãƒ‰ã®å½±éŸ¿ç¯„å›²ã‚’æœ€å°é™ã«æŠ‘ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ï¼ˆå‚è€ƒï¼šConsumerWidgetï¼‰

æ›¸ãã‚„ã™ã•è¦‹ã‚„ã™ã•ã‚’ã¨ã‚‹ãªã‚‰ConsumerWidgetã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€å„ªå…ˆãªã‚‰Consumerã¨ã„ã†é¸æŠè‚¢ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚

å€¤ã®ç›£è¦–ãŒå¿…è¦ãªã„å ´åˆã®ã‚¢ã‚¯ã‚»ã‚¹
å…ˆã»ã©ã®MyHomePageã‚¯ãƒ©ã‚¹ã«ãƒœã‚¿ãƒ³ã‚’è¿½åŠ ã—ã¦ã‚¿ãƒƒãƒ—ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¨­å®šã—ã¦ã¿ã¾ã™ã€‚
å€¤ã®å¤‰æ›´ã‚’æ¤œçŸ¥ã—ãªãã¦è‰¯ã„å ´åˆã¯context.readã‚’ä½¿ç”¨ã—ã¦å‘¼ã³å‡ºã—ã¾ã™ã€‚
Providerãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã„ã†ã¨ã“ã‚ã®listen: falseã«ã‚ãŸã‚Šã¾ã™ã€‚

class MyHomePage extends StatelessWidget {
  MyHomePage({Key key, this.title}) : super(key: key);
  final String title;

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text(title),
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: <Widget>[
            Text(
              'You have pushed the button this many times:',
            ),
            Consumer(builder: (context, watch, child) {
              return Text('${watch(_counterProvider).count}');
            }),
          ],
        ),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: () {
          context.read(_counterProvider).increment();    // â†ã“ã“
        },
        tooltip: 'Increment',
        child: Icon(Icons.add),
      ),
    );
  }
}
ã‚³ãƒ¼ãƒ‰å…¨ä½“
ä»Šå›ã®ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚¢ãƒ—ãƒªã®å…¨ä½“ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚

import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';

final _counterProvider = ChangeNotifierProvider(
  (ref) => Counter(),
);

class Counter extends ChangeNotifier {
  var _count = 0;
  int get count => _count;

  void increment() {
    _count++;
    notifyListeners();
  }
}

void main() {
  runApp(
    ProviderScope(child: MyApp()),
  );
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter Demo',
      home: MyHomePage(title: 'Flutter Demo Home Page'),
    );
  }
}

class MyHomePage extends StatelessWidget {
  MyHomePage({Key key, this.title}) : super(key: key);
  final String title;

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text(title),
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: <Widget>[
            Text(
              'You have pushed the button this many times:',
            ),
            Consumer(builder: (context, watch, child) {
              return Text('${watch(_counterProvider).count}');
            }),
          ],
        ),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: () {
          context.read(_counterProvider).increment();
        },
        tooltip: 'Increment',
        child: Icon(Icons.add),
      ),
    );
  }
}
ä½¿ã£ã¦ã¿ãŸæ„Ÿæƒ³
ã¾ã åŸºæœ¬çš„ãªéƒ¨åˆ†ã—ã‹è§¦ã£ã¦ã„ã¾ã›ã‚“ãŒã€Providerãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§æ„Ÿã˜ã¦ã„ãŸä¸éƒ½åˆãŒè§£æ¶ˆã•ã‚Œã¦ã„ã¦éå¸¸ã«è‰¯ã„ã§ã™â—ï¸

ã‚¢ãƒ—ãƒªã®è¦æ¨¡ãŒå¤§ãããªã‚‹ã»ã©æ©æµã‚’å—ã‘ã‚‰ã‚Œãã†ãªå°è±¡ã§ã—ãŸã€‚
ãŸã ã—ã¾ã å®Œå…¨ã«å®‰å®šã—ã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªã„ãã†ãªã®ã§ã€ä»Šå¾Œç ´å£Šçš„ãªå¤‰æ›´ãŒåŠ ã‚ã‚‹å¯èƒ½æ€§ã‚‚ã‚¼ãƒ­ã§ã¯ãªã„ã¨ã“ã‚ãŒæ³¨æ„ç‚¹ã§ã™ã€‚

ç¾æ™‚ç‚¹ã§Flutterå…¬å¼ã‚‚æ¨å¥¨ã—ã¦ã„ã‚‹Providerãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚‚ã™ãã«ã¯ãªããªã‚‰ãªã„ã®ã§ã€ã‚ˆã‚Šå®‰å®šæ€§ã‚’æ±‚ã‚ãŸã„å ´åˆã¯å¾“æ¥ã®Providerãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã„ã†é¸æŠã«ãªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã‚“ãŒã€æ©Ÿèƒ½é¢ã§ã¯Providerãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’é¸ã¶ç†ç”±ã¯ã»ã¨ã‚“ã©ãªã„ã¨æ„Ÿã˜ã¦ã„ã¾ã™ğŸ˜²

ã¾ã Providerãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚ˆã†ã«å…¬å¼æ¨å¥¨ã¨ã¾ã§ã¯ãªã£ã¦ã„ã¾ã›ã‚“ãŒã€RiverpodãŒä»Šå¾Œãƒ¡ã‚¸ãƒ£ãƒ¼ã«ãªã‚‹å¯èƒ½æ€§ã¯ååˆ†ã«ã‚ã‚‹ã®ã§è¦ãƒã‚§ãƒƒã‚¯ã§ã™ğŸ‘€

å…¬å¼ã‚µã‚¤ãƒˆã«ã‚ˆã‚Šè©³ã—ã„æƒ…å ±ãŒè¼‰ã£ã¦ã„ã‚‹ã®ã§ãã¡ã‚‰ã‚‚å‚è€ƒã«ã—ã¦ã¿ã¦ãã ã•ã„ã€‚

https://techracho.bpsinc.jp/wingdoor/2020_10_08/97815